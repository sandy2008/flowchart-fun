(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[4],{116:function(e,t,n){e.exports={App:"Layout_App__r8LpH",TextareaContainer:"Layout_TextareaContainer__eh1Jz",resizableHandle:"Layout_resizableHandle__ZoYfz",resizer:"Layout_resizer__2zJLY",Loading:"Layout_Loading__1JZQm"}},135:function(e,t,n){e.exports={GraphContainer:"Graph_GraphContainer__1TxTa",media:"Graph_media__3Jp2l"}},136:function(e,t,n){e.exports={Spinner:"Spinner_Spinner__1VElG",load:"Spinner_load__3cB9D"}},137:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(1),a=n(35);function o(){var e=Object(r.useContext)(a.a).setIsReady;return Object(r.useEffect)((function(){return e}),[e]),null}},138:function(e,t,n){"use strict";n.d(t,"a",(function(){return W}));var r=n(34),a=n(116),o=n.n(a),i=n(201),c=n(1),s=n(200),l=n(78),u=n(139),d=n.n(u),f=n(404),h=n(140),b=n.n(h),g=n(194),m=n.n(g),j=n(96),v=n(115),p=n(195),w=n(196),O=n.n(w),x=n(5),y=new RegExp(/^\s*\[(.*)\]/),C=new RegExp(/^( )+/g);var S=12.5;function k(e){var t,n=document.getElementById("resizer");if(n&&(n.innerHTML=e.replace(/-/gm,"&#x2011;"),n.firstChild)){var r=document.createRange();r.selectNodeContents(n.firstChild);var a=Array.from(r.getClientRects()).reduce((function(e,t){var n=t.width;return n>e?n:e}),0);return{width:Math.max(100,z((t=a,Math.floor(.63567*t+6)))),height:Math.max(75,z(E(n.clientHeight)))}}}function L(e){var t=e.match(y),n=t?e.slice(t[0].length):e;return n.indexOf(": ")>-1?n.split(": ")[0].trim():""}function _(e){var t=e.match(y),n=t?e.slice(t[0].length):e,r=n.trim();return n.indexOf(": ")>-1&&(r=n.split(": ").slice(1).join(": ").trim()),r.replace(/\\(.)/gm,"$1")}function R(e,t){var n=e.match(y);return n?n[1]:t.toString()}function E(e){return Math.floor(.63567*e+20)}function z(e){return Math.ceil(e/S)*S}var H=n(3);function I(e){return Object(H.jsx)("svg",Object(l.a)(Object(l.a)({xmlns:"http://www.w3.org/2000/svg",width:20,height:20,viewBox:"0 0 24 24"},e),{},{children:Object(H.jsx)("path",{d:"M24 4.557a9.83 9.83 0 01-2.828.775 4.932 4.932 0 002.165-2.724 9.864 9.864 0 01-3.127 1.195 4.916 4.916 0 00-3.594-1.555c-3.179 0-5.515 2.966-4.797 6.045A13.978 13.978 0 011.671 3.149a4.93 4.93 0 001.523 6.574 4.903 4.903 0 01-2.229-.616c-.054 2.281 1.581 4.415 3.949 4.89a4.935 4.935 0 01-2.224.084 4.928 4.928 0 004.6 3.419A9.9 9.9 0 010 19.54a13.94 13.94 0 007.548 2.212c9.142 0 14.307-7.721 13.995-14.646A10.025 10.025 0 0024 4.557z"})}))}function N(){return Object(H.jsxs)("svg",{viewBox:"0 0 24 24",width:20,height:20,xmlns:"http://www.w3.org/2000/svg",children:[Object(H.jsx)("title",{children:"GitHub icon"}),Object(H.jsx)("path",{d:"M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"})]})}var A=n(135),T=n.n(A),D=n(198),M=n(25);d.a.prototype.hasInitialised||(d.a.use(b.a),d.a.use(m.a),d.a.prototype.hasInitialised=!0);var B=function(e){var t=e.textToParse,n=e.setHoverLineNumber,a=e.shouldResize,o=Object(c.useRef)(),i=Object(c.useRef)(),u=function(){var e=Object(x.f)().search;return"0"!==new URLSearchParams(e).get("animation")}(),h=Object(c.useRef)(!1),b=Object(c.useCallback)((function(){if(o.current){var e=!1,n=[];try{var a;n=function(e){var t,n=[],a=1,o=O()(e,{preserveNewlines:!0}).split("\n"),i=Object(p.a)(o);try{for(i.s();!(t=i.n()).done;){var c=t.value;if(""!==c.trim()){var s=c.match(C),u=_(c).match(/^\((.+)\)$/);if(u&&(u=u[1]),s){var d=s[0],f=void 0,h=a;for(d.length;h>=1;){var b,g=o[(h-=1)-1];if(""!==g.trim()){var m=g.match(C);if((null!==(b=null===m||void 0===m?void 0:m[0].length)&&void 0!==b?b:0)<d.length){f=h;break}}}if(f){for(var j=R(o[h-1],h),w=u||R(c,a),x="".concat(j,"_").concat(w,":0");n.map((function(e){return e.data.id})).includes(x);){var S=x.split(":"),E=Object(r.a)(S,2)[1];E=(parseInt(E,10)+1).toString(),x="".concat(j,"_").concat(w,":").concat(E)}n.push({data:{id:x,source:j,target:w,label:L(c),lineNumber:a}})}}if(!u){var z=_(c),H=c.match(y);n.push({data:Object(l.a)({id:H?H[1]:a.toString(),label:z,lineNumber:a},k(z))})}a++}else a++}}catch(B){i.e(B)}finally{i.f()}for(var I=n.reduce((function(e,t){return Object(l.a)(Object(l.a)({},e),{},Object(v.a)({},t.data.label,t.data.id))}),{}),N=0,A=Object.entries(n);N<A.length;N++){var T=Object(r.a)(A[N],2),D=T[0],M=T[1];"target"in M.data&&(Object.values(I).includes(M.data.target)||M.data.target in I&&(n[parseInt(D)].data.target=I[M.data.target]))}return n}(t),null===(a=i.current)||void 0===a||a.json({elements:n})}catch(s){var c;e=!0,null===(c=i.current)||void 0===c||c.destroy(),i.current=d()()}e||(o.current.json({elements:n}),o.current.layout(Object(l.a)(Object(l.a)({},j.a),{},{animate:!!h.current&&u})).run(),o.current.center(),h.current=!0)}}),[u,t]),g=Object(c.useCallback)((function(){console.log("Resizing!"),o.current&&(o.current.resize(),o.current.animate({fit:{padding:6}}))}),[]);Object(c.useEffect)((function(){g()}),[g,a]);var m=Object(f.a)(g,250);Object(c.useEffect)((function(){return window.addEventListener("resize",m.callback),function(){return window.removeEventListener("resize",m.callback)}}),[m]);var w=Object(c.useCallback)((function(){if(o.current){var e=o.current.svg({full:!0,scale:1.5}),n=(new DOMParser).parseFromString(e,"image/svg+xml"),r=Object(s.a)(n.children[0].querySelectorAll("path")).filter((function(e){return!e.getAttribute("fill")&&"fill stroke markers"===e.getAttribute("paint-order")}));(r=[].concat(Object(s.a)(r),Object(s.a)(n.children[0].querySelectorAll("rect")))).forEach((function(e){return e.setAttribute("fill","#ffffff")}));var a=n.createComment("Original Flowchart Text (flowchart.fun):\n\n".concat(t,"\n\n"));n.children[0].appendChild(a);var i=n.documentElement.outerHTML;Object(D.saveAs)(new Blob([i],{type:"image/svg+xml;charset=utf-8"}),"flowchart.svg")}}),[t]);return Object(c.useEffect)((function(){i.current=d()(),o.current=d()({container:document.getElementById("cy"),layout:Object(l.a)({},j.a),elements:[],style:[{selector:"node",style:{backgroundColor:"#FFFFFF","border-color":j.c,color:j.d,label:"data(label)","font-size":10,"text-wrap":"wrap","text-max-width":"80","text-valign":"center","text-halign":"center","line-height":1.25,"border-width":1,shape:"rectangle","font-family":"-apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol",width:"data(width)",height:"data(height)"}},{selector:"edge",style:{"loop-direction":"0deg","loop-sweep":"20deg",width:1,"text-background-opacity":1,"text-background-color":"#ffffff","line-color":j.c,"target-arrow-color":j.c,"target-arrow-shape":"vee","arrow-scale":1,"curve-style":"bezier",label:"data(label)","font-size":10,"text-valign":"center","font-family":"-apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol","text-halign":"center","edge-text-rotation":"autorotate"}},{selector:".edgeHovered",style:{"line-color":"#aaaaaa","target-arrow-color":"#aaaaaa",color:"#aaaaaa"}},{selector:".nodeHovered",style:{backgroundColor:"#ededec"}}],userZoomingEnabled:!0,userPanningEnabled:!0,boxSelectionEnabled:!1});var e=o.current,t=i.current;function r(){this.addClass("nodeHovered"),n(this.data().lineNumber)}function a(){this.addClass("edgeHovered"),n(this.data().lineNumber)}function c(){this.removeClass("nodeHovered"),this.removeClass("edgeHovered"),n(void 0)}return e.on("mouseover","node",r),e.on("mouseover","edge",a),e.on("tapstart","node",r),e.on("tapstart","edge",a),e.on("mouseout","node, edge",c),e.on("tapend","node, edge",c),function(){e.destroy(),t.destroy(),o.current=void 0,i.current=void 0}}),[n]),Object(c.useEffect)((function(){b()}),[b]),Object(H.jsxs)(M.a,{className:T.a.GraphContainer,template:"minmax(0, 1fr) auto / none",overflow:"hidden",children:[Object(H.jsx)(M.a,{id:"cy",overflow:"hidden"}),Object(H.jsxs)(M.a,{content:"space-between",flow:"column",p:2,children:[Object(H.jsxs)(M.a,{flow:"column",items:"center",gap:2,children:[Object(H.jsx)(M.b,{children:"Tone Row"}),Object(H.jsx)("a",{href:"https://twitter.com/row_tone",className:T.a.media,children:Object(H.jsx)(I,{})}),Object(H.jsx)("a",{href:"https://github.com/tone-row/flowchart-fun",className:T.a.media,children:Object(H.jsx)(N,{})})]}),Object(H.jsxs)(M.a,{flow:"column",items:"center",gap:2,children:[Object(H.jsx)(M.b,{as:"button",onClick:w,title:"Download SVG",children:"Download"}),"|",Object(H.jsx)(M.b,{as:"a",href:"".concat(new URL(window.location.href).origin,"/r/").concat(encodeURIComponent(t)),rel:"noreferrer",target:"_blank",children:"Share"})]})]})]})},F=n(35),G=n(136),U=n.n(G),P=20,J=Math.PI*P;function V(){return Object(H.jsx)("svg",{width:46,height:46,className:U.a.Spinner,style:{"--d":2*J},children:Object(H.jsx)("circle",{r:P,strokeWidth:3,fill:"transparent",cx:23,cy:23,strokeDasharray:J,strokeDashoffset:J})})}function W(e){var t=e.children,n=e.textToParse,a=e.setHoverLineNumber,s=Object(c.useState)(0),l=Object(r.a)(s,2),u=l[0],d=l[1],f=Object(c.useContext)(F.a).isReady;return Object(H.jsxs)(H.Fragment,{children:[!f&&Object(H.jsx)(Z,{}),Object(H.jsxs)(M.a,{template:"minmax(0, 1fr) minmax(0, 1fr) / none",overflow:"hidden",className:o.a.App,at:{tablet:{display:"flex",template:"none / none"}},root:!0,children:[Object(H.jsx)(i.a,{defaultSize:{width:"50%",height:"auto"},maxWidth:"90%",minWidth:"10%",enable:{top:!1,right:!0,bottom:!1,left:!1,topRight:!1,bottomRight:!1,bottomLeft:!1,topLeft:!1},className:o.a.TextareaContainer,handleClasses:{right:o.a.resizableHandle},onResizeStop:function(){return d((function(e){return e+1}))},children:t}),Object(H.jsx)(B,{textToParse:n,setHoverLineNumber:a,shouldResize:u}),Object(H.jsx)("div",{id:"resizer",className:o.a.resizer})]})]})}function Z(){return Object(H.jsx)(M.a,{background:"color-background",content:"center",className:o.a.Loading,root:!0,children:Object(H.jsx)(V,{})})}},407:function(e,t,n){"use strict";n.r(t);var r=n(34),a=n(1),o=function(e){var t=a.useRef(e);return a.useEffect((function(){t.current=e})),t},i="undefined"!==typeof performance?performance:Date,c=function(){return i.now()};function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=o(e),i=1e3/t,s=a.useRef(0),l=a.useRef(),u=function(){return l.current&&clearTimeout(l.current)},d=[t,n,r];function f(){s.current=0,u()}return a.useEffect((function(){return f}),d),a.useCallback((function(){var e=arguments,t=c(),a=function(){s.current=t,u(),r.current.apply(null,e)},o=s.current;if(n&&0===o)return a();if(t-o>i){if(o>0)return a();s.current=t}u(),l.current=setTimeout((function(){a(),s.current=0}),i)}),d)}var l=function(e,t){void 0===t&&(t="");var n=Object(a.useState)((function(){return window.localStorage.getItem(e)||t})),r=n[0],o=n[1];Object(a.useEffect)((function(){var n=window.localStorage.getItem(e);r!==n&&o(n||t)}));var i=Object(a.useCallback)((function(n){n.key===e&&n.newValue!==r&&o(n.newValue||t)}),[r]);return Object(a.useEffect)((function(){return window.addEventListener("storage",i),function(){return window.removeEventListener("storage",i)}}),[i]),[r,function(t){o(t),window.localStorage.setItem(e,t)}]},u=n(199),d=n(5),f=n(96),h=n(138),b=n(137),g=n(3);t.default=function(){var e=Object(d.g)().workspace,t=l(["flowcharts.fun",void 0===e?"":e].filter(Boolean).join(":"),f.b),n=Object(r.a)(t,2),o=n[0],i=n[1],c=Object(a.useReducer)((function(e,t){return t}),o),m=Object(r.a)(c,2),j=m[0],v=s(m[1],2),p=Object(a.useState)(),w=Object(r.a)(p,2),O=w[0],x=w[1],y=Object(a.useRef)(null),C=Object(a.useRef)([]);return Object(a.useEffect)((function(){if(y.current){var e=y.current;C.current="number"===typeof O?e.deltaDecorations([],[{range:{startLineNumber:O,startColumn:1,endLineNumber:O,endColumn:1},options:{isWholeLine:!0,className:"node-hover"}}]):e.deltaDecorations(C.current,[])}return function(){delete window.flowchartFunSetText}}),[O,i]),Object(a.useEffect)((function(){v(o)}),[o,v]),Object(g.jsx)(h.a,{setHoverLineNumber:x,textToParse:j,children:Object(g.jsx)(u.a,{defaultValue:o,options:{minimap:{enabled:!1},fontSize:16,tabSize:2,insertSpaces:!0,wordBasedSuggestions:!1,occurrencesHighlight:!1,renderLineHighlight:!1,highlightActiveIndentGuide:!1,scrollBeyondLastLine:!1,renderIndentGuides:!1,overviewRulerBorder:!1,lineDecorationsWidth:"10px",renderValidationDecorations:"off",hideCursorInOverviewRuler:!0,matchBrackets:"never",selectionHighlight:!1,lineHeight:28},onChange:function(e){return e&&i(e)},loading:Object(g.jsx)(b.a,{}),onMount:function(e,t){y.current=e}})})}},96:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return i}));var r={name:"dagre",fit:!0,animate:!0,rankDir:"LR",spacingFactor:1.25},a="#000000",o="#000000",i="this app works by typing\n  new lines create new nodes\n    indentation creates child nodes \n    and any text: before a colon+space creates a label\n  [linking] you can link to nodes using their ID in parentheses\n    like this: (1)\n    lines have a default ID of their line-number\n      but you can also supply a custom ID in brackets\n        like this: (linking) // use single line comments\n/*\nor \nmultiline \ncomments\n\nHave fun! \ud83c\udf89\n*/"}}]);
//# sourceMappingURL=4.98c4cde4.chunk.js.map